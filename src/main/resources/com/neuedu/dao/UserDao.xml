<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.neuedu.dao.UserDao">
    <select id="login" resultType="User">
        select id,login_id as loginId,name,phone,password,sex,birthday,email,address,is_del as isDel from user where login_id=#{loginId};
    </select>
    <select id="list" resultType="User">
        select id,login_id as loginId,name,phone,password,sex,birthday,email,address,is_del as isDel
        from user
          <if test="withPage==1">
              limit #{pageStart}
          </if>

    </select>
    <insert id="add" parameterType="User">
        insert
          into user(login_id ,name,phone,password,sex,birthday,email,address,is_del)
        values
          (#{loginId},#{name},#{phone},#{password},#{sex},#{birthday},#{email},#{address},1)
    </insert>
    <update id="delete" parameterType="Integer">
        update user set is_del=0 where id=#{id};
    </update>
    <update id="reback" parameterType="Integer">
        update user set is_del=1 where id=#{id};
    </update>
    <update id="update" parameterType="User">
        update  user  set
          name=#{name},phone=#{phone},password=#{password},sex=#{sex},birthday=#{birthday},email=#{email},address=#{address}
        where id=#{id};
    </update>
    <select id="getUserById" resultType="User">
        select id,login_id as loginId,name,phone,password,sex,birthday,email,address,is_del as isDel from user where id=#{id};
    </select> 
    <insert id="batch" parameterType="java.util.List">
        insert
          into user(login_id ,name,phone,password,sex,birthday,email,address,is_del)
        values
        <foreach collection="list" item="user" separator=",">
            (
            #{user.loginId},#{user.name},#{user.phone},#{user.password},#{user.sex},#{user.birthday},#{user.email},#{user.address},1
            )
        </foreach>
    </insert>
</mapper>